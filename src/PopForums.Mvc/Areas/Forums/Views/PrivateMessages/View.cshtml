@model PrivateMessageView
@{
	ViewBag.Title = PopForums.Resources.PrivateMessages + " - " + Model.PrivateMessage.Subject;
    Layout = "~/Areas/Forums/Views/Shared/PopForumsMaster.cshtml";
    var pmSerialized = JsonSerializer.Serialize(Model.State, new JsonSerializerOptions { PropertyNamingPolicy = JsonNamingPolicy.CamelCase });
}

@section HeaderContent {
	<script type="text/javascript">
        PopForums.currentPmState = Object.assign(new PopForums.PrivateMessageState(), @Html.Raw(pmSerialized));
        PopForums.currentPmState.setupPm();
	</script>
}

<div class="vh-100 d-flex flex-column">

<div class="row">
	<h1>@Model.PrivateMessage.Subject</h1>
	<ul id="TopBreadcrumb" class="breadcrumb">
		<li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">@PopForums.Resources.Forums</a></li>
		<li class="breadcrumb-item"><a asp-action="Index">@PopForums.Resources.PrivateMessages</a></li>
	</ul>
</div>

<div class="row overflow-auto my-3">
    <div id="PostStream"></div>
</div>

<div class="row">
	<form asp-action="Reply" asp-route-id="@Model.PrivateMessage.PMID" method="post" role="form">
		<textarea id="FullText" name="FullText" class="form-control" rows="2"></textarea>
		<input id="SendButton" type="submit" value="@PopForums.Resources.Reply" class="btn btn-primary my-3" />
	</form>

	<form asp-action="ArchivePM" asp-route-id="@Model.PrivateMessage.PMID">
		<p><input type="submit" value="@PopForums.Resources.Archive" class="btn btn-primary" /></p>
	</form>
</div>

</div>
