@model UserState
@inject IUserRetrievalShim UserRetrievalShim
@inject ITimeFormatStringService TimeFormatStringService
@{
	var serialized = JsonSerializer.Serialize(Model, new JsonSerializerOptions{ PropertyNamingPolicy = JsonNamingPolicy.CamelCase });
	var user = UserRetrievalShim.GetUser();
}
<script>
	PopForums.timeFormats = Object.assign(new PopForums.TimeFormats(), @Html.Raw(@TimeFormatStringService.GetTimeFormatsAsJson()));
	@if (user != null)
{
	<text>PopForums.userState = Object.assign(new PopForums.UserState(), @Html.Raw(serialized));</text>
}
</script>